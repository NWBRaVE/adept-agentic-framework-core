# DEPRECATED: Use Dockerfile
# mcp_server.Dockerfile
FROM python:3.11-slim

RUN addgroup --system appgroup && adduser --system --ingroup appgroup appuser

ENV HOME=/app
WORKDIR ${HOME}

COPY pyproject.toml uv.lock* ./
COPY src/ ./src/

RUN pip install --no-cache-dir uv
RUN uv venv -p 3.11 && uv pip install --no-cache-dir --editable .

RUN mkdir -p /app/data && chown -R appuser:appgroup /app

USER appuser

EXPOSE 8080

CMD ["uv", "run", "run-mcp-server"]
